import{_ as H}from"./BeXqCXS0.js";import{u as I,e as U,f as p,g as W,h as q,i as P,r as J,s as R,n as Q,j as X,k as b,l as Y,m as Z,p as K,q as k,v as A,x as ee,y as ae,z as B,c as D,A as te,a as y,t as x,F as O,B as V,o as w,b as se,w as ne,d as re}from"./WOmPiPIg.js";import{a as ce}from"./CSjOjhwZ.js";const ie=()=>{const e=I().public.apiBase;return{fetchPages:async()=>await $fetch(`${e}/pages`),fetchPage:async s=>await $fetch(`${e}/pages/${s}`),fetchNews:async(s={})=>await $fetch(`${e}/news`,{params:s}),fetchNewsItem:async s=>await $fetch(`${e}/news/${s}`),fetchEvents:async(s={})=>await $fetch(`${e}/events`,{params:s}),fetchEvent:async s=>await $fetch(`${e}/events/${s}`),fetchMembers:async(s={})=>await $fetch(`${e}/members`,{params:s}),fetchMember:async s=>await $fetch(`${e}/members/${s}`),fetchServices:async(s={})=>await $fetch(`${e}/services`,{params:s}),fetchService:async s=>await $fetch(`${e}/services/${s}`),fetchSettings:async()=>await $fetch(`${e}/settings`)}},oe={trailing:!0};function le(a,e=25,o={}){if(o={...oe,...o},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let u,t,l=[],n,m;const _=(v,c)=>(n=ue(a,v,c),n.finally(()=>{if(n=null,o.trailing&&m&&!t){const g=_(v,m);return m=null,g}}),n);return function(...v){return n?(o.trailing&&(m=v),n):new Promise(c=>{const g=!t&&o.leading;clearTimeout(t),t=setTimeout(()=>{t=null;const d=o.leading?u:_(this,v);for(const s of l)s(d);l=[]},e),g?(u=_(this,v),c(u)):l.push(c)})}}async function ue(a,e,o){return await a.apply(e,o)}const de=Symbol.for("nuxt:client-only"),fe=a=>a==="defer"||a===!1;function M(...a){var s;const e=typeof a[a.length-1]=="string"?a.pop():void 0;he(a[0],a[1])&&a.unshift(e);let[o,u,t={}]=a;const l=P(()=>ae(o));if(typeof l.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof u!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const n=U();t.server??(t.server=!0),t.default??(t.default=me),t.getCachedData??(t.getCachedData=L),t.lazy??(t.lazy=!1),t.immediate??(t.immediate=!0),t.deep??(t.deep=p.deep),t.dedupe??(t.dedupe="cancel"),t._functionName,n._asyncData[l.value];const m={cause:"initial",dedupe:t.dedupe};(s=n._asyncData[l.value])!=null&&s._init||(m.cachedData=t.getCachedData(l.value,n,{cause:"initial"}),n._asyncData[l.value]=T(n,l.value,u,t,m.cachedData));const _=n._asyncData[l.value];_._deps++;const v=()=>n._asyncData[l.value].execute(m),c=t.server!==!1&&n.payload.serverRendered;{let r=function(f){const h=n._asyncData[f];h!=null&&h._deps&&(h._deps--,h._deps===0&&(h==null||h._off()))};const i=ee();if(i&&c&&t.immediate&&!i.sp&&(i.sp=[]),i&&!i._nuxtOnBeforeMountCbs){i._nuxtOnBeforeMountCbs=[];const f=i._nuxtOnBeforeMountCbs;K(()=>{f.forEach(h=>{h()}),f.splice(0,f.length)}),k(()=>f.splice(0,f.length))}const C=i&&(i._nuxtClientOnly||A(de,!1));c&&n.isHydrating&&(_.error.value||_.data.value!=null)?_.status.value=_.error.value?"error":"success":i&&(!C&&n.payload.serverRendered&&n.isHydrating||t.lazy)&&t.immediate?i._nuxtOnBeforeMountCbs.push(v):t.immediate&&v();const j=Z(),F=W([l,...t.watch||[]],([f],[h])=>{var E,S;if((f||h)&&f!==h){const z=((E=n._asyncData[h])==null?void 0:E.data.value)!==p.value;h&&r(h);const N={cause:"initial",dedupe:t.dedupe};(S=n._asyncData[f])!=null&&S._init||(N.cachedData=t.getCachedData(f,n,{cause:"initial"}),n._asyncData[f]=T(n,f,u,t,N.cachedData)),n._asyncData[f]._deps++,(t.immediate||z)&&n._asyncData[f].execute(N)}else _._execute({cause:"watch",dedupe:t.dedupe})},{flush:"sync"});j&&q(()=>{F(),r(l.value)})}const g={data:$(()=>{var r;return(r=n._asyncData[l.value])==null?void 0:r.data}),pending:$(()=>{var r;return(r=n._asyncData[l.value])==null?void 0:r.pending}),status:$(()=>{var r;return(r=n._asyncData[l.value])==null?void 0:r.status}),error:$(()=>{var r;return(r=n._asyncData[l.value])==null?void 0:r.error}),refresh:(...r)=>n._asyncData[l.value].execute(...r),execute:(...r)=>n._asyncData[l.value].execute(...r),clear:()=>G(n,l.value)},d=Promise.resolve(n._asyncDataPromises[l.value]).then(()=>g);return Object.assign(d,g),d}function $(a){return P({get(){var e;return(e=a())==null?void 0:e.value},set(e){const o=a();o&&(o.value=e)}})}function he(a,e){return!(typeof a=="string"||typeof a=="object"&&a!==null||typeof a=="function"&&typeof e=="function")}function G(a,e){e in a.payload.data&&(a.payload.data[e]=void 0),e in a.payload._errors&&(a.payload._errors[e]=p.errorValue),a._asyncData[e]&&(a._asyncData[e].data.value=b(a._asyncData[e]._default()),a._asyncData[e].error.value=p.errorValue,a._asyncData[e].status.value="idle"),e in a._asyncDataPromises&&(a._asyncDataPromises[e]&&(a._asyncDataPromises[e].cancelled=!0),a._asyncDataPromises[e]=void 0)}function _e(a,e){const o={};for(const u of e)o[u]=a[u];return o}function T(a,e,o,u,t){var g;(g=a.payload._errors)[e]??(g[e]=p.errorValue);const l=u.getCachedData!==L,n=o,m=u.deep?J:R,_=t!=null,v=a.hook("app:data:refresh",async d=>{(!d||d.includes(e))&&await c.execute({cause:"refresh:hook"})}),c={data:m(_?t:u.default()),pending:P(()=>c.status.value==="pending"),error:Y(a.payload._errors,e),status:R("idle"),execute:(d={})=>{if(a._asyncDataPromises[e]){if(fe(d.dedupe??u.dedupe))return a._asyncDataPromises[e];a._asyncDataPromises[e].cancelled=!0}{const r="cachedData"in d?d.cachedData:u.getCachedData(e,a,{cause:d.cause??"refresh:manual"});if(r!=null)return a.payload.data[e]=c.data.value=r,c.error.value=p.errorValue,c.status.value="success",Promise.resolve(r)}c.status.value="pending";const s=new Promise((r,i)=>{try{r(n(a))}catch(C){i(C)}}).then(async r=>{if(s.cancelled)return a._asyncDataPromises[e];let i=r;u.transform&&(i=await u.transform(r)),u.pick&&(i=_e(i,u.pick)),a.payload.data[e]=i,c.data.value=i,c.error.value=p.errorValue,c.status.value="success"}).catch(r=>{if(s.cancelled)return a._asyncDataPromises[e];c.error.value=X(r),c.data.value=b(u.default()),c.status.value="error"}).finally(()=>{s.cancelled||delete a._asyncDataPromises[e]});return a._asyncDataPromises[e]=s,a._asyncDataPromises[e]},_execute:le((...d)=>c.execute(...d),0,{leading:!0}),_default:u.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var d;v(),(d=a._asyncData[e])!=null&&d._init&&(a._asyncData[e]._init=!1),l||Q(()=>{var s;(s=a._asyncData[e])!=null&&s._init||(G(a,e),c.execute=()=>Promise.resolve(),c.data.value=p.value)})}};return c}const me=()=>p.value,L=(a,e,o)=>{if(e.isHydrating)return e.payload.data[a];if(o.cause!=="refresh:manual"&&o.cause!=="refresh:hook")return e.static.data[a]},ve={class:"py-16"},ye={class:"container mx-auto px-4"},ge={key:0,class:"text-center py-8"},De={key:1,class:"text-center py-8"},we={class:"text-red-600"},be={key:2,class:"grid grid-cols-1 md:grid-cols-3 gap-8"},pe={class:"text-xl font-semibold mb-3"},xe={class:"py-16 bg-gray-50"},$e={class:"container mx-auto px-4"},Pe={key:0,class:"text-center py-8"},Ce={key:1,class:"text-center py-8"},Ne={class:"text-red-600"},Ee={key:2,class:"grid grid-cols-1 md:grid-cols-3 gap-8"},Se={class:"text-xl font-semibold mb-3"},Re={class:"text-gray-600 mb-4"},Me={__name:"index",async setup(a){let e,o;const{fetchServices:u,fetchNews:t}=ie(),{data:l,pending:n,error:m}=([e,o]=B(()=>M("services",()=>u())),e=await e,o(),e),{data:_,pending:v,error:c}=([e,o]=B(()=>M("news",()=>t({limit:3}))),e=await e,o(),e),g=P(()=>{var d;return((d=_.value)==null?void 0:d.data)||[]});return ce({title:"GARNET - Ghanaian Academic and Research Network",description:"Connecting Ghana's education sector through high-speed internet and innovation"}),(d,s)=>{const r=H;return w(),D("div",null,[s[5]||(s[5]=te('<section class="bg-primary text-white py-20"><div class="container mx-auto px-4"><h1 class="text-5xl font-bold mb-6">Welcome to GARNET</h1><p class="text-xl mb-8">Ghanaian Academic and Research Network</p><p class="text-lg max-w-3xl"> Connecting Ghana&#39;s education sector through high-speed internet, educational resources, and innovation opportunities. </p></div></section>',1)),y("section",ve,[y("div",ye,[s[1]||(s[1]=y("h2",{class:"text-3xl font-bold mb-8"},"Our Services",-1)),b(n)?(w(),D("div",ge,[...s[0]||(s[0]=[y("p",{class:"text-gray-600"},"Loading services...",-1)])])):b(m)?(w(),D("div",De,[y("p",we,"Error loading services: "+x(b(m).message),1)])):(w(),D("div",be,[(w(!0),D(O,null,V(b(l),i=>(w(),D("div",{key:i.id,class:"p-6 border rounded-lg shadow-sm hover:shadow-md transition"},[y("h3",pe,x(i.name),1),y("p",null,x(i.description),1)]))),128))]))])]),y("section",xe,[y("div",$e,[s[4]||(s[4]=y("h2",{class:"text-3xl font-bold mb-8"},"Latest News",-1)),b(v)?(w(),D("div",Pe,[...s[2]||(s[2]=[y("p",{class:"text-gray-600"},"Loading news...",-1)])])):b(c)?(w(),D("div",Ce,[y("p",Ne,"Error loading news: "+x(b(c).message),1)])):(w(),D("div",Ee,[(w(!0),D(O,null,V(b(g),i=>(w(),D("div",{key:i.id,class:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition"},[y("h3",Se,x(i.title),1),y("p",Re,x(i.excerpt),1),se(r,{to:`/news/${i.slug}`,class:"text-primary hover:underline"},{default:ne(()=>[...s[3]||(s[3]=[re(" Read more â†’ ",-1)])]),_:1},8,["to"])]))),128))]))])])])}}};export{Me as default};
